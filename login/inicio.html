<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login com Validação</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body onLoad="entrar()">
    <header>
        <div class="imgheader"><img src="logo-desenvolve.png" alt="Logo desenvolve">
        </div>
        <div class="txtheader"><h1>Aula Cadastro Validado com Express (Back-end)</h1></div>
    </header>
    <div class="container">
        <div class="card">
            <h1>Bem vindo,</h1>
            <h1 id="logado"></h1>
           <div class="saircaixa"><button onclick="sair()">Sair</button></div>
            <script src="script.js"></script>
            <script src="logout.js"></script>
        </div>
    </div>

</body>
</html>
<script>
  function entrar(){
    var myHeaders = new Headers();
myHeaders.append("x-api-key", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhbmR5MjkwMy5hbHBAZ21haWwuY29tIiwiaWF0Ijo0NCwiZXhwIjoxNjQ5NDU1MjQ0NDgzLCJzZW5oYSI6IjEyMzQ1Njc4IiwiZW1haWwiOiJhbmR5MjkwMy5hbHBAZ21haWwuY29tIn0.BVJPP1KqrcfKK4TKN7jzMBGVrjljpfSUM9ayaCgCCso");

var requestOptions = {
  method: 'GET',
  headers: myHeaders,
  redirect: 'follow'
};

fetch("http://localhost:3000/api/v1/usuarios", requestOptions)
  .then(response => response.text())
  .then(resposta => {
    const usuarios = JSON.parse(resposta);
    console.log(usuarios.result);
    for(let i = 0; i < usuarios.result.length; i++){
      console.log(usuarios.result[i]);
      //created list by looping through the array
      var list = document.createElement("li");
      list.innerHTML = usuarios.result[i].nome;
      document.getElementById("logado").appendChild(list);
      //created list by looping through the array
      var list = document.createElement("li");
      list.innerHTML = usuarios.result[i].email;
      document.getElementById("logado").appendChild(list);

    }

  })
  .catch(error => console.log('error', error));
  }
</script>
